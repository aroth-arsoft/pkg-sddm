Description: load xsession.d scripts
Author: kfunk
Origin: upstream, https://github.com/krf/sddm/commit/47861f90a1cf3b28990e6ffb2d89f43217d0dcbe
Forwarded: no, from upstream
Last-Update: 2014-10-09
---
This patch header follows DEP-3: http://dep.debian.net/deps/dep3/
Index: sddm-0.9.0/data/scripts/Xsession
===================================================================
--- sddm-0.9.0.orig/data/scripts/Xsession
+++ sddm-0.9.0/data/scripts/Xsession
@@ -57,6 +57,26 @@ if [ -d /etc/X11/xinit/xinitrc.d ]; then
   done
 fi
 
+# Load Xsession scripts
+# OPTIONFILE, USERXSESSION, USERXSESSIONRC and ALTUSERXSESSION are required
+# by the scripts to work
+xsessionddir="/etc/X11/Xsession.d"
+OPTIONFILE=/etc/X11/Xsession.options
+USERXSESSION=$HOME/.xsession
+USERXSESSIONRC=$HOME/.xsessionrc
+ALTUSERXSESSION=$HOME/.Xsession
+
+if [ -d "$xsessionddir" ]; then
+  for i in `ls $xsessionddir`; do
+  script="$xsessionddir/$i"
+  echo "Loading X session script $script"
+  if [ -r "$script" -a -f "$script" ] && expr "$i" : '^[[:alnum:]_-]\+$' > /dev/null; then
+    . "$script"
+  fi
+  done
+fi
+
+
 if [ -d /etc/X11/Xresources ]; then
   for i in /etc/X11/Xresources/*; do
     [ -f $i ] && xrdb -merge $i
